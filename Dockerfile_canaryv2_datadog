FROM eclipse-temurin:17.0.12_7-jdk-jammy
WORKDIR /usr/app
ADD target/*.jar app.jar
RUN apt-get update && apt-get install -y procps && rm -rf /var/lib/apt/lists/*
ENV DD_SERVICE="java-service" \
    DD_ENV="dev" \
    DD_VERSION="0.0.2" \
    DD_LOGS_INJECTION="true" \
    DD_DYNAMIC_INSTRUMENTATION_ENABLED="true"
# Optional: source-code integration (set from CI)
ARG COMMIT_SHA=""
ENV DD_GIT_COMMIT_SHA="${COMMIT_SHA}"
ENV DD_GIT_REPOSITORY_URL="https://github.com/Sumanth17-git/springboot-microservice-logging.git"
ENV JAVA_OPTS=""
EXPOSE 8881
ENTRYPOINT exec java ${JAVA_OPTS} -jar app.jar


